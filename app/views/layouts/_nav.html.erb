<nav class="navbar">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="<%= root_path %>">
       BikeShare
      </a>
      <span class="navbar-burger burger" data-target="navMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="navMenu" class="navbar-menu">
      <div class="navbar-start">
      <% if current_user %>
        <div class="dropdown is-hoverable navbar-item">
          <div class="dropdown-trigger">
            <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
              <span>Stations</span>
              <span class="icon is-small">
                <i class="fas fa-angle-down" aria-hidden="true"></i>
              </span>
            </button>
          </div>
          <div class="dropdown-menu" id="dropdown-menu" role="menu">
            <div class="dropdown-content">
              <%= link_to 'All Stations', stations_path, class: 'dropdown-item' %>
              <hr class="dropdown-divider">
              <%= link_to 'Stations Dashboard', stations_dashboard_path, class: 'dropdown-item' %>
            </div>
          </div>
        </div>
        <div class="dropdown is-hoverable navbar-item">
          <div class="dropdown-trigger">
            <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
              <span>Trips</span>
              <span class="icon is-small">
                <i class="fas fa-angle-down" aria-hidden="true"></i>
              </span>
            </button>
          </div>
          <div class="dropdown-menu" id="dropdown-menu" role="menu">
            <div class="dropdown-content">
              <%= link_to 'All Trips', trips_path, class: 'dropdown-item' %>
              <hr class="dropdown-divider">
              <%= link_to 'Trips Dashboard', trips_dashboard_path, class: 'dropdown-item' %>
            </div>
          </div>
        </div>
        <div class="dropdown is-hoverable navbar-item">
          <div class="dropdown-trigger">
            <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
              <span>Conditions</span>
              <span class="icon is-small">
                <i class="fas fa-angle-down" aria-hidden="true"></i>
              </span>
            </button>
          </div>
          <div class="dropdown-menu" id="dropdown-menu" role="menu">
            <div class="dropdown-content">
              <%= link_to 'All Conditions', conditions_path, class: 'dropdown-item' %>
              <hr class="dropdown-divider">
              <%= link_to 'Conditions Dashboard', conditions_dashboard_path, class: 'dropdown-item' %>
            </div>
          </div>
        </div>
        <% else %>
        <%= link_to 'Stations', stations_path, class: 'navbar-item' %>
        <%= link_to 'Trips', trips_path, class: 'navbar-item' %>
        <%= link_to 'Conditions', conditions_path, class: 'navbar-item' %>
        <% end %>
     </div>
      
      <div class="navbar-end">
        <%= link_to 'Bike Shop', bike_shop_path, class: 'navbar-item' %>
        <%= link_to "Cart: #{@cart.total_count}", cart_path, class: "navbar-item" %>
        <% if current_admin? %>
          <%= link_to "Logged in as Admin User: #{current_user.user_name}", admin_dashboard_index_path, class: 'navbar-item' %>
          <%= link_to 'Log Out', logout_path, class: 'navbar-item'%>
        <% elsif current_user %>
          <%= link_to "Logged in as #{current_user.user_name}", dashboard_path, class: "navbar-item" %>
          <%= link_to 'Log Out', logout_path, class: 'navbar-item'%>
        <% else %>
          <%= link_to 'Sign Up', new_user_path, class: 'navbar-item'%>
          <%= link_to 'Log In', login_path, class: 'navbar-item'%>
        <% end %>
      </div>
    </div>
  </div>
</nav>
<script type="text/javascript">
  (function () {
    var burger = document.querySelector('.burger');
    var nav = document.querySelector('#' + burger.dataset.target);

    burger.addEventListener('click', function () {
      burger.classList.toggle('is-active');
      nav.classList.toggle('is-active');
    });
  })();
</script>